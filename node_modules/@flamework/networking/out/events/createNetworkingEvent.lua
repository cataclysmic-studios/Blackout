-- Compiled with roblox-ts v2.1.0
local TS = _G[script]
local Object = TS.import(script, TS.getModule(script, "@rbxts", "object-utils"))
local RunService = TS.import(script, TS.getModule(script, "@rbxts", "services")).RunService
local populateInstanceMap = TS.import(script, script.Parent.Parent, "util", "populateInstanceMap").populateInstanceMap
local createClientHandler = TS.import(script, script.Parent, "createClientHandler").createClientHandler
local createServerHandler = TS.import(script, script.Parent, "createServerHandler").createServerHandler
local function getDefaultConfiguration(config)
	local _object = {}
	local _left = "disableClientGuards"
	local _condition = config.disableClientGuards
	if _condition == nil then
		_condition = false
	end
	_object[_left] = _condition
	local _left_1 = "disableServerGuards"
	local _condition_1 = config.disableServerGuards
	if _condition_1 == nil then
		_condition_1 = false
	end
	_object[_left_1] = _condition_1
	return _object
end
local function createNetworkingEvent(globalName, serverEvents, clientEvents, serverMiddleware, clientMiddleware, partialConfig)
	if partialConfig == nil then
		partialConfig = {}
	end
	local config = getDefaultConfiguration(partialConfig)
	local networkInfos = {}
	local remotes = {}
	populateInstanceMap("RemoteEvent", "events-" .. globalName, Object.keys(serverEvents), remotes)
	populateInstanceMap("RemoteEvent", "events-" .. globalName, Object.keys(clientEvents), remotes)
	for name in remotes do
		local _arg1 = {
			eventType = "Event",
			globalName = globalName,
			name = name,
		}
		networkInfos[name] = _arg1
	end
	if RunService:IsServer() then
		return {
			server = createServerHandler(remotes, networkInfos, serverEvents, clientEvents, config, serverMiddleware),
			client = nil,
		}
	else
		return {
			server = nil,
			client = createClientHandler(remotes, networkInfos, serverEvents, clientEvents, config, clientMiddleware),
		}
	end
end
return {
	createNetworkingEvent = createNetworkingEvent,
}
